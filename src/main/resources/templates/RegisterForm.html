<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <!--  <link rel="stylesheet" type="text/css" th:href="@{/register_style.css}" /> -->
    <link rel="stylesheet" type="text/css" href="/static/register_style.css" />

    <style>
        
    </style>
    <title>Title</title>
</head>
<body>
    <form th:action="@{/PostRegister}" method="post" class="form-group" enctype="multipart/form-data">

        UserName: <input th:name="UserName" class="form-control" required><br>
        UserSurname: <input th:name="UserSurname" class="form-control" required><br>
        <span id="login_error"  class="form-control" style="display: none; margin-bottom: 16px; background-color: cornsilk">User login is taken</span>
        UserLogin: <input th:name="UserLogin" class="form-control" required><br>
        UserPass: <input th:name="UserPass" class="form-control" type="password" required><br>
        <span th:if="${email_error == 'email_error'}" class="form-control" style="margin-bottom: 16px; background-color: cornsilk">User e-mail is taken</span>
        UserMail: <input th:name="UserMail" class="form-control" type="email" required><br>
        UserPhoto: <input type="file" th:name="file" />
        <input type="submit" value="Register" class="btn btn-primary">
        <label for="test"></label><input id="test">
    </form>


<script>
    //fetch(`/testRestAPI?test_var=aa`).then(response => response.json()).then(data => console.log(data));
    document.getElementById("test").addEventListener("input", function() {
        const test_var = document.getElementById("test").value;
        fetch(`/testRestAPI?test_var=${test_var}`).then(response => response.json())
                                                  .then(data => {
                                                      console.log(data);
                                                      if (data === true) {
                                                            document.getElementById("login_error").style.display = "block";
                                                          document.getElementById("test").style.backgroundColor = "red";
                                                      } else {
                                                          document.getElementById("test").style.backgroundColor = "green";
                                                            document.getElementById("login_error").style.display = "none";
                                                      }
                                                  } );
    });
</script>
</body>
</html>
